!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("@angular/material/card"),require("@angular/material/icon"),require("@angular/material/progress-bar"),require("@angular/material/core"),require("@angular/forms"),require("@angular/animations")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/core","@angular/material/card","@angular/material/icon","@angular/material/progress-bar","@angular/material/core","@angular/forms","@angular/animations"],e):e((t=t||self).angularMaterialExtensionsPasswordStrength={},t.ng.common,t.ng.core,t.card,t.icon,t.progressBar,t.core$1,t.ng.forms,t.ng.animations)}(this,function(t,e,a,r,n,s,i,o,p){"use strict";var l="minChar",c="lowerCase",d="upperCase",m="digit",h=" specialChar",g="customChars",u="primary",f="accent",C="warn",y=function(){function t(){}return t.prototype.isUndefinedOrEmpty=function(t){t&&t.value&&t.value.length},t.prototype.validate=function(t,e){var a=this;return function(r){if(a.isUndefinedOrEmpty(r),!e.test(r.value)){var n={};return n[t]={actualValue:r.value,requiredPattern:e},n}}},t.prototype.confirm=function(t){var e=this;return function(a){if(e.isUndefinedOrEmpty(a),a.value!==t)return{notConfirmed:{password:t,passwordConfirmation:a.value}}}},t}(),w={lowerCase:RegExp(/^(?=.*?[a-z])/),upperCase:RegExp(/^(?=.*?[A-Z])/),digit:RegExp(/^(?=.*?[0-9])/),specialChar:RegExp(/^(?=.*?[" !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"])/)},v=function(){function t(){this.enableLengthRule=!0,this.enableLowerCaseLetterRule=!0,this.enableUpperCaseLetterRule=!0,this.enableDigitRule=!0,this.enableSpecialCharRule=!0,this.min=8,this.max=30,this.warnThreshold=21,this.accentThreshold=81,this.onStrengthChanged=new a.EventEmitter,this.criteriaMap=new Map,this.passwordFormControl=new o.FormControl,this.passwordConfirmationFormControl=new o.FormControl,this.validatorsArray=[],this._strength=0,this.matPasswordStrengthValidator=new y}return t.prototype.ngOnInit=function(){this.setRulesAndValidators(),this.password&&this.calculatePasswordStrength()},t.prototype.ngOnChanges=function(t){t.externalError&&t.externalError.firstChange||t.password.isFirstChange()||(t.externalError&&t.externalError.currentValue?this._color=C:t.password.previousValue!==t.password.currentValue||t.password.firstChange?this.password&&this.password.length>0?this.calculatePasswordStrength():this.reset():this.calculatePasswordStrength())},Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength?this._strength:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._strength<this.warnThreshold?C:this._strength<this.accentThreshold?f:u},enumerable:!0,configurable:!0}),t.prototype._containAtLeastMinChars=function(){return this.containAtLeastMinChars=this.password.length>=this.min,this.containAtLeastMinChars},t.prototype._containAtLeastOneLowerCaseLetter=function(){return this.containAtLeastOneLowerCaseLetter=this.criteriaMap.get(c).test(this.password),this.containAtLeastOneLowerCaseLetter},t.prototype._containAtLeastOneUpperCaseLetter=function(){return this.containAtLeastOneUpperCaseLetter=this.criteriaMap.get(d).test(this.password),this.containAtLeastOneUpperCaseLetter},t.prototype._containAtLeastOneDigit=function(){return this.containAtLeastOneDigit=this.criteriaMap.get(m).test(this.password),this.containAtLeastOneDigit},t.prototype._containAtLeastOneSpecialChar=function(){return this.containAtLeastOneSpecialChar=this.criteriaMap.get(h).test(this.password),this.containAtLeastOneSpecialChar},t.prototype._containCustomChars=function(){return this.containAtCustomChars=this.criteriaMap.get(g).test(this.password),this.containAtCustomChars},t.prototype.parseCustomValidatorsRegex=function(t){return void 0===t&&(t=this.customValidator),this.customValidator instanceof RegExp?this.customValidator:"string"==typeof this.customValidator?RegExp(this.customValidator):void 0},t.prototype.setRulesAndValidators=function(){var t=this;this.validatorsArray=[],this.criteriaMap=new Map,this.passwordConfirmationFormControl.setValidators(o.Validators.compose([o.Validators.required,this.matPasswordStrengthValidator.confirm(this.password)])),this.validatorsArray.push(o.Validators.required),this.enableLengthRule&&(this.criteriaMap.set(l,RegExp("^.{"+this.min+","+this.max+"}$")),this.validatorsArray.push(o.Validators.minLength(this.min)),this.validatorsArray.push(o.Validators.maxLength(this.max))),this.enableLowerCaseLetterRule&&(this.criteriaMap.set(c,w.lowerCase),this.validatorsArray.push(o.Validators.pattern(w.lowerCase))),this.enableUpperCaseLetterRule&&(this.criteriaMap.set(d,w.upperCase),this.validatorsArray.push(o.Validators.pattern(w.upperCase))),this.enableDigitRule&&(this.criteriaMap.set(m,w.digit),this.validatorsArray.push(o.Validators.pattern(w.digit))),this.enableSpecialCharRule&&(this.criteriaMap.set(h,w.specialChar),this.validatorsArray.push(o.Validators.pattern(w.specialChar))),this.customValidator&&(this.criteriaMap.set(g,this.parseCustomValidatorsRegex()),this.validatorsArray.push(o.Validators.pattern(this.parseCustomValidatorsRegex()))),this.criteriaMap.forEach(function(e,a){t.validatorsArray.push(t.matPasswordStrengthValidator.validate(a,e))}),this.passwordFormControl.setValidators(o.Validators.compose(this.validatorsArray.slice())),this.Validators=o.Validators.compose(this.validatorsArray.slice())},t.prototype.calculatePasswordStrength=function(){var t=[],e=100/this.criteriaMap.size;t.push(!!this.enableLengthRule&&this._containAtLeastMinChars(),!!this.enableLowerCaseLetterRule&&this._containAtLeastOneLowerCaseLetter(),!!this.enableUpperCaseLetterRule&&this._containAtLeastOneUpperCaseLetter(),!!this.enableDigitRule&&this._containAtLeastOneDigit(),!!this.enableSpecialCharRule&&this._containAtLeastOneSpecialChar(),!!this.customValidator&&this._containCustomChars()),this._strength=t.filter(function(t){return t}).length*e,this.onStrengthChanged.emit(this.strength),this.setRulesAndValidators()},t.prototype.reset=function(){this._strength=0,this.containAtLeastMinChars=this.containAtLeastOneLowerCaseLetter=this.containAtLeastOneUpperCaseLetter=this.containAtLeastOneDigit=this.containAtCustomChars=this.containAtLeastOneSpecialChar=!1},t.decorators=[{type:a.Component,args:[{selector:"mat-password-strength",exportAs:"matPasswordStrength",template:'\n    <mat-progress-bar mode="determinate"\n                      [color]="color"\n                      [value]="strength">\n    </mat-progress-bar>\n  ',styles:["\n    .green :host::ng-deep .mat-progress-bar.mat-primary .mat-progress-bar-fill:after{background-color:#43a047}\n  "],changeDetection:a.ChangeDetectionStrategy.OnPush}]}],t.propDecorators={password:[{type:a.Input}],externalError:[{type:a.Input}],enableLengthRule:[{type:a.Input}],enableLowerCaseLetterRule:[{type:a.Input}],enableUpperCaseLetterRule:[{type:a.Input}],enableDigitRule:[{type:a.Input}],enableSpecialCharRule:[{type:a.Input}],min:[{type:a.Input}],max:[{type:a.Input}],customValidator:[{type:a.Input}],warnThreshold:[{type:a.Input}],accentThreshold:[{type:a.Input}],onStrengthChanged:[{type:a.Output}]},t}();function b(t,e,a){var r={timing:t,delay:0,rotateX:e,rotateY:a};return p.animation([p.style({"backface-visibility":"visible"}),p.animate("{{ timing }}s {{ delay }}s ease-in",p.keyframes([p.style({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),p.style({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),p.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),p.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),p.style({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:r})}b(1,1,0),b(1,0,1);var L=p.animation(p.animate("{{ timing }}s {{ delay }}s",p.keyframes([p.style({transform:"translate3d(0, 0, 0)",offset:0}),p.style({transform:"translate3d(-10px, 0, 0)",offset:.1}),p.style({transform:"translate3d(10px, 0, 0)",offset:.2}),p.style({transform:"translate3d(-10px, 0, 0)",offset:.3}),p.style({transform:"translate3d(10px, 0, 0)",offset:.4}),p.style({transform:"translate3d(-10px, 0, 0)",offset:.5}),p.style({transform:"translate3d(10px, 0, 0)",offset:.6}),p.style({transform:"translate3d(-10px, 0, 0)",offset:.7}),p.style({transform:"translate3d(10px, 0, 0)",offset:.8}),p.style({transform:"translate3d(-10px, 0, 0)",offset:.9}),p.style({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),x=function(){function t(){this.enableScoreInfo=!1,this.lowerCaseCriteriaMsg="contains at least one lower character",this.upperCaseCriteriaMsg="contains at least one upper character",this.digitsCriteriaMsg="contains at least one digit character",this.specialCharsCriteriaMsg="contains at least one special character",this.customCharsCriteriaMsg="contains at least one custom character"}return t.prototype.ngOnInit=function(){this.minCharsCriteriaMsg||(this.minCharsCriteriaMsg="contains at least "+this.passwordComponent.min+" characters")},t.decorators=[{type:a.Component,args:[{selector:"mat-password-strength-info",exportAs:"matPasswordStrengthInfo",template:'\n    <mat-card @list>\n      <mat-card-content>\n        <div class="info-row" @items *ngIf="passwordComponent.enableLowerCaseLetterRule">\n          <div *ngIf="passwordComponent.containAtLeastOneLowerCaseLetter; then done else error" @flipY>\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>{{lowerCaseCriteriaMsg}}</span>\n        </div>\n\n        <div class="info-row" @items *ngIf="passwordComponent.enableUpperCaseLetterRule">\n          <div *ngIf="passwordComponent.containAtLeastOneUpperCaseLetter; then done else error">\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>{{upperCaseCriteriaMsg}}</span>\n        </div>\n\n        <div class="info-row" @items *ngIf="passwordComponent.enableDigitRule">\n          <div *ngIf="passwordComponent.containAtLeastOneDigit; then done else error">\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>{{digitsCriteriaMsg}}</span>\n        </div>\n\n        <div class="info-row" @items *ngIf="passwordComponent.enableSpecialCharRule">\n          <div *ngIf="passwordComponent.containAtLeastOneSpecialChar; then done else error">\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>{{specialCharsCriteriaMsg}}</span>\n        </div>\n\n        <div class="info-row" @items *ngIf="passwordComponent.enableLengthRule">\n          <div *ngIf="passwordComponent.containAtLeastMinChars; then done else error">\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>{{minCharsCriteriaMsg}}</span>\n        </div>\n\n        <div class="info-row" @items *ngIf="passwordComponent.customValidator">\n          <div *ngIf="passwordComponent.containAtCustomChars; then done else error">\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>{{customCharsCriteriaMsg}}</span>\n        </div>\n\n        <div *ngIf="enableScoreInfo" class="info-row" @items>\n          <div *ngIf="passwordComponent.strength === 100; then done else error">\n          </div>\n          <ng-template #done>\n            <mat-icon @positiveState color="primary">done</mat-icon>\n          </ng-template>\n          <ng-template #error>\n            <mat-icon @negativeState color="warn">error</mat-icon>\n          </ng-template>\n          <span>Password\'s strength = {{passwordComponent.strength}} %100</span>\n        </div>\n\n      </mat-card-content>\n    </mat-card>\n  ',styles:["\n    mat-card{flex-direction:row;place-content:stretch center;flex:1 1 0}mat-card,mat-card mat-card-content{box-sizing:border-box;display:flex;align-items:stretch}mat-card mat-card-content{flex-direction:column;max-width:100%;place-content:stretch flex-start}mat-card mat-card-content mat-icon{margin-right:10px}mat-card mat-card-content .info-row{flex-direction:row;box-sizing:border-box;display:flex;align-items:center}\n  "],animations:[p.trigger("list",[p.transition(":enter",[p.query("@items",p.stagger(300,p.animateChild()))])]),p.trigger("items",[p.transition(":enter",[p.style({transform:"scale(0.5)",opacity:0}),p.animate("1s cubic-bezier(.8,-0.6,0.2,1.5)",p.style({transform:"scale(1)",opacity:1}))]),p.transition(":leave",[p.style({transform:"scale(1)",opacity:1,height:"*"}),p.animate("1s cubic-bezier(.8,-0.6,0.2,1.5)",p.style({transform:"scale(0.5)",opacity:0,height:"0px",margin:"0px"}))])]),p.trigger("positiveState",[p.transition(":enter",[p.style({"backface-visibility":"visible"}),p.animate("{{ timing }}s {{ delay }}s ease-in",p.keyframes([p.style({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),p.style({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),p.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),p.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),p.style({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:1,rotateY:0}})]),p.trigger("negativeState",[p.transition(":enter",p.useAnimation(L))])]}]}],t.propDecorators={passwordComponent:[{type:a.Input}],enableScoreInfo:[{type:a.Input}],lowerCaseCriteriaMsg:[{type:a.Input}],upperCaseCriteriaMsg:[{type:a.Input}],digitsCriteriaMsg:[{type:a.Input}],specialCharsCriteriaMsg:[{type:a.Input}],customCharsCriteriaMsg:[{type:a.Input}],minCharsCriteriaMsg:[{type:a.Input}]},t}(),M=function(){function t(){this._type="text"}return Object.defineProperty(t.prototype,"type",{get:function(){return this.isVisible?"text":"password"},enumerable:!0,configurable:!0}),t.decorators=[{type:a.Component,args:[{selector:"mat-pass-toggle-visibility",template:'\n    <button (click)="isVisible = !isVisible"\n            type="button"\n            tabindex="-1"\n            class="mat-icon-button cdk-focused cdk-mouse-focused" mat-icon-button\n            matRippleCentered="true"\n            matRipple>\n      <mat-icon>{{isVisible ? \'visibility\' : \'visibility_off\' }}</mat-icon>\n    </button>\n  ',styles:["\n\n  "],encapsulation:a.ViewEncapsulation.None}]}],t.propDecorators={isVisible:[{type:a.Input}]},t}(),A=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:a.NgModule,args:[{imports:[e.CommonModule,s.MatProgressBarModule,r.MatCardModule,n.MatIconModule,i.MatRippleModule],exports:[v,x,M],declarations:[v,x,M],entryComponents:[M]}]}],t}();t.MatPassToggleVisibilityComponent=M,t.MatPasswordStrengthComponent=v,t.MatPasswordStrengthInfoComponent=x,t.MatPasswordStrengthModule=A,t.MatPasswordStrengthValidator=y,t.RegExpValidator=w,t.ɵa=L,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=password-strength.umd.min.js.map
